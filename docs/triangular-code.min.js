/**
 * @license
 * https://github.com/lizongying/triangular-code
 */
class TriangularCode{constructor(t,e=200){this.size=e;const i=Math.sin(this.degreesToRadians(60));this._svgNamespace="http://www.w3.org/2000/svg";let s=t.querySelector("svg");if(s){while(s.firstChild){s.removeChild(s.firstChild)}}else{s=document.createElementNS(this._svgNamespace,"svg");s.setAttribute("transform",`scale(1,${i})`);t.appendChild(s)}s.setAttribute("width",`${e}`);s.setAttribute("height",`${e}`);s.setAttribute("viewBox",`0 0 ${e} ${e}`);this._svg=s}degreesToRadians(t){return t*(Math.PI/180)}stringToBinary(t){const e=new TextEncoder;const i=e.encode(t);return Array.from(i).flatMap((t=>t.toString(2).padStart(8,"0").split(""))).map(Number)}encode(t,e="green",i="white"){let s=this.stringToBinary(t);console.log("data",s);if(s.length<32){s=s.concat(new Array(32-s.length).fill(0))}let l=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0];if(s.length>32){l=l.concat([0])}l=l.concat(s);let n=[0,0,0,1,0,0,1,1,1,0,0,1,1,0,1,1,0,0,1,1,1,1,1,1,1];let r=l.length+25;let o=Math.ceil(Math.sqrt(r));let a=this.size/o;let h=0;let c=0;for(let t=0;t<o;t++){let s=2*t+1;if(t>o-6){s-=(5-(o-t))*2+1;let l=t-(o-5);let r=2*l+1;for(let s=0;s<r;s++){let r=this.size-5/2*a-l*a/2;let o=t*a;let h;let g;let d;if(s%2===0){h=[r+s*a/2,o];g=[r+s*a/2-a/2,o+a];d=[r+(s*a/2+a/2),o+a]}else{h=[r+s*a/2,o+a];g=[r+s*a/2-a/2,o];d=[r+(s*a/2+a/2),o]}const f=document.createElementNS(this._svgNamespace,"polygon");f.setAttribute("points",`${h.join(",")} ${g.join(",")} ${d.join(",")}`);if(c<n.length&&n[c]===1){f.setAttribute("fill",e)}else{f.setAttribute("fill",i)}this._svg.appendChild(f);c++}}for(let n=0;n<s;n++){let s=this.size/2-t*a/2;let r=t*a;let o;let c;let g;if(n%2===0){o=[s+n*a/2,r];c=[s+n*a/2-a/2,r+a];g=[s+(n*a/2+a/2),r+a]}else{o=[s+n*a/2,r+a];c=[s+n*a/2-a/2,r];g=[s+(n*a/2+a/2),r]}const d=document.createElementNS(this._svgNamespace,"polygon");d.setAttribute("points",`${o.join(",")} ${c.join(",")} ${g.join(",")}`);if(h<l.length&&l[h]===1){d.setAttribute("fill",e)}else{d.setAttribute("fill",i)}this._svg.appendChild(d);h++}}}}